(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["useCar"],{3795:function(e,t,a){},"4d61":function(e,t,a){"use strict";var r=a("3795"),s=a.n(r);s.a},"5a38":function(e,t,a){"use strict";var r=a("d5b0"),s=a.n(r);s.a},"6fef":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("van-form",{staticClass:"add-approve",on:{submit:e.onSubmit}},[a("van-field",{attrs:{required:"",name:"部门",label:"部门",autocomplete:"false",readonly:"","input-align":"right","right-icon":"arrow",placeholder:"请选择部门",rules:[{required:!0,message:"请选择部门",trigger:"onChange"}]},on:{click:function(t){e.showPicker=!0,e.pickType="depart"}},model:{value:e.pickCheckName.depart,callback:function(t){e.$set(e.pickCheckName,"depart",t)},expression:"pickCheckName.depart"}}),a("van-field",{attrs:{required:"",name:"typeId",label:"车辆类型",placeholder:"请选择车辆类型",readonly:"","input-align":"right","right-icon":"arrow",rules:[{required:!0,message:"请选择车辆类型",trigger:"onChange"}]},on:{click:function(t){e.showPicker=!0,e.pickType="type"}},model:{value:e.pickCheckName.type,callback:function(t){e.$set(e.pickCheckName,"type",t)},expression:"pickCheckName.type"}}),a("van-field",{attrs:{required:"",name:"all_userid",label:"乘车人数",type:"digit","input-align":"right",placeholder:"请输入乘车人数"},model:{value:e.form.all_userid,callback:function(t){e.$set(e.form,"all_userid",t)},expression:"form.all_userid"}}),a("van-field",{attrs:{required:"",name:"haveDriver",label:"司机配置","input-align":"right"},scopedSlots:e._u([{key:"input",fn:function(){return[a("van-radio-group",{attrs:{direction:"horizontal"},model:{value:e.form.have_driver,callback:function(t){e.$set(e.form,"have_driver",t)},expression:"form.have_driver"}},[a("van-radio",{attrs:{name:"1","checked-color":"#467DB9"}},[e._v("是")]),a("van-radio",{attrs:{name:"2","checked-color":"#467DB9"}},[e._v("否")])],1)]},proxy:!0}])}),a("van-field",{attrs:{required:"",readonly:"",clickable:"",name:"startTime",value:e.form.start_time,label:"开始时间",placeholder:"点击选择日期","input-align":"right","right-icon":"arrow",rules:[{required:!0,message:"请选择开始时间",trigger:"onChange"}]},on:{click:function(t){e.showCalendar=!0,e.pickType="start_time"}}}),a("van-field",{attrs:{required:"",readonly:"",clickable:"",name:"fromArea",label:"出发地",placeholder:"请选择出发地","input-align":"right","right-icon":"arrow",rules:[{required:!0,message:"请选择出发地",trigger:"onChange"}]},on:{click:function(t){e.showPickerAddress=!0,e.areaType="from_address"}},model:{value:e.form.from_address,callback:function(t){e.$set(e.form,"from_address",t)},expression:"form.from_address"}}),a("van-field",{attrs:{readonly:"",clickable:"",required:"",name:"toArea",label:"目的地",placeholder:"请选择目的地","input-align":"right","right-icon":"arrow",rules:[{required:!0,message:"请选择目的地",trigger:"onChange"}]},on:{click:function(t){e.showPickerAddress=!0,e.areaType="to_address"}},model:{value:e.form.to_address,callback:function(t){e.$set(e.form,"to_address",t)},expression:"form.to_address"}}),a("van-field",{attrs:{type:"tel",required:"",label:"手机号",placeholder:"请输入手机号","input-align":"right",rules:[{pattern:/^1[3456789]\d{9}$/,message:"目前只支持中国大陆的手机号码",trigger:"onChange"}]},model:{value:e.form.mobile,callback:function(t){e.$set(e.form,"mobile",t)},expression:"form.mobile"}}),a("van-field",{attrs:{rows:"2",autosize:"",label:"用车事由",type:"textarea",maxlength:"50",placeholder:"用车事由","show-word-limit":""},model:{value:e.form.cause,callback:function(t){e.$set(e.form,"cause",t)},expression:"form.cause"}}),a("div",{staticClass:"approve-box"},[a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[e._v(" 审批人 "),a("span",[e._v("（已由管理员预设不可更改）")])]),e.stepList.length>0?a("ul",e._l(e.stepList,(function(t,r){return a("li",{key:r},[1==t.approver_type?[a("div",{staticClass:"item"},[a("div",{staticClass:"photo"},[a("van-icon",{attrs:{name:"friends"}})],1),a("p",[e._v(e._s("上级主管"))]),a("van-tag",{attrs:{type:"primary",plain:"",color:"#467DB9"}},[e._v(e._s(1===t.type?"会签":"或签"))])],1)]:e._l(t.role_user_arr,(function(r,s){return a("div",{key:s,staticClass:"item"},[a("div",{staticClass:"photo"},[a("van-icon",{attrs:{name:"friends"}})],1),a("p",[e._v(e._s(r.role_name))]),a("van-tag",{attrs:{type:"primary",plain:"",color:"#467DB9"}},[e._v(e._s(1===t.type?"会签":"或签"))])],1)}))],2)})),0):a("div",{staticClass:"tips"},[e._v("未设置审批流程，请联系管理员设置审批流程")])]),a("div",{staticClass:"item"},[a("div",{staticClass:"title"},[e._v("抄送人")]),a("ul",[a("li",[a("div",{staticClass:"item"},[a("div",{staticClass:"photo"},[a("van-icon",{attrs:{name:"friends"}})],1),a("p",[e._v("司机")])])]),e._l(e.pickerUsers.copyer_id,(function(t,r){return a("li",{key:r},[a("div",{staticClass:"item"},[a("div",{staticClass:"photo"},[t.avatar?a("img",{attrs:{src:t.avatar}}):a("van-icon",{attrs:{name:"friends"}}),a("van-button",{staticClass:"close",attrs:{"native-type":"button"},on:{click:function(t){return e.handleDelUser(r,"copyer_id")}}},[a("van-icon",{attrs:{name:"cross"}})],1)],1),a("p",[e._v(e._s(t.name))])])])})),a("li",[a("div",{staticClass:"item"},[a("van-button",{staticClass:"add",attrs:{"native-type":"button"},on:{click:function(t){e.showPickerUser=!0,e.single=!1,e.pickerUserType="copyer_id"}}},[a("van-icon",{attrs:{name:"plus"}})],1),a("p",{staticStyle:{"margin-top":"0"}},[e._v("添加")])],1)])],2)])]),a("div",{staticStyle:{margin:"16px"}},[a("van-button",{attrs:{disabled:0===e.stepList.length,type:"info",size:"large",color:"#467DB9","native-type":"submit",loading:e.button.loading,"loading-text":e.button.loadingTxt}},[e._v(e._s(0===e.stepList.length?"未设置审批流程，联系管理员":"提交"))])],1)],1),a("van-calendar",{attrs:{color:"#467db9"},on:{confirm:e.handleDateChange},model:{value:e.showCalendar,callback:function(t){e.showCalendar=t},expression:"showCalendar"}}),a("pickerUser",{attrs:{single:e.single,show:e.showPickerUser,data:e.pickerUsers[e.pickerUserType]},on:{"update:show":function(t){e.showPickerUser=t},done:e.pickerUserDone}}),a("picker-address",{attrs:{show:e.showPickerAddress,data:e.pickerAddress[e.areaType]},on:{"update:show":function(t){e.showPickerAddress=t},done:e.pickerAddressDone}}),a("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[a("van-picker",{attrs:{"show-toolbar":"",columns:e.pickData[e.pickType]},on:{confirm:e.onConfirm,cancel:function(t){e.showPicker=!1}}})],1)],1)},s=[],i=(a("99af"),a("4de4"),a("a15b"),a("d81d"),a("a434"),a("b0c0"),a("d3b7"),a("25f0"),a("96cf"),a("1da1")),n=a("5eba"),o=a("17c3"),c=a("adfd"),p=a("365c"),d=a("13aa"),l={components:{pickerUser:o["a"],pickerAddress:c["a"]},data:function(){return{showPicker:!1,showCalendar:!1,activeIndex:"",activeId:"",pickType:"",showPickerUser:!1,showPickerAddress:!1,single:!0,form:{department_id:"",car_type_id:"",start_time:"",have_driver:"1",all_userid:"",from_address:"",to_address:"",mobile:"",cause:"",copyer_id:"",travel_mileage:1,type:1},pickData:{type:[],depart:[]},pickCheckName:{type:"",depart:""},pickerUsers:{all_userid:[],copyer_id:[]},pickerUserType:"all_userid",areaType:"from_address",pickerAddress:{from_address:{},to_address:{}},typeData:[],stepList:[],copyerList:[],button:{loading:!1,loadingTxt:"提交中..."},submit:!1}},computed:{departList:function(){return this.$store.state.user.userInfo.dep_names},rootPath:function(){return this.$store.state.common.rootPath}},watch:{pickerUsers:{handler:function(e){e[this.pickerUserType].length>0&&(this.single?this.form.userid=e[this.pickerUserType][0].userid:this.form[this.pickerUserType]=e[this.pickerUserType].map((function(e){return e.userid})).join(","))},deep:!0}},created:function(){this.getTypeData(),this.departList.length>0&&!this.id&&(this.pickData.depart=this.departList.map((function(e){return e.dep_name})),this.pickCheckName.depart=this.departList[0].dep_name,this.form.department_id=this.departList[0].id,this.getApproveSteps()),this.id=this.$route.params.id,this.id&&this.getData()},methods:{getData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,s,i,o,c,d,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,p["a"].getInfo({id:e.id});case 2:if(a=t.sent,r=a.msg,s=a.code,i=a.data,e.loading=!1,200===s){for(l in o=Object.assign({},i),c=JSON.parse(o.from_address),d=JSON.parse(o.to_address),e.pickerAddress.from_address=c,e.pickerAddress.to_address=d,o.from_address="".concat(c.area," ").concat(c.detail),o.to_address="".concat(d.area," ").concat(d.detail),o.start_time=Object(n["a"])(new Date(1e3*o.start_time),"yyyy-MM-dd"),o.have_driver=o.have_driver.toString(),e.pickCheckName.type=o.type_name,e.pickCheckName.depart=o.department_name,e.pickerUsers.all_userid=Array.isArray(o.all_user)?o.all_user:[],e.pickerUsers.copyer_id=Array.isArray(o.copyer_user)?o.copyer_user:[],e.form)e.form[l]=o[l];e.getApproveSteps()}else e.$notify({type:"danger",message:r,duration:1e3});case 8:case"end":return t.stop()}}),t)})))()},onConfirm:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:a.t0=t.pickType,a.next="depart"===a.t0?3:"type"===a.t0?5:7;break;case 3:return t.departList.length>0?(t.pickCheckName.depart=e,t.form.department_id=t.departList.filter((function(t){return t.dep_name===e}))[0].id,t.getApproveSteps()):t.$notify({type:"danger",message:"当前用户没有部门，请联系管理员",duration:1e3}),a.abrupt("break",8);case 5:return t.typeData.length>0?(t.pickCheckName.type=e,t.form.car_type_id=t.typeData.filter((function(t){return t.name===e}))[0].id):t.$notify({type:"danger",message:"暂无车辆类型，请联系管理员",duration:1e3}),a.abrupt("break",8);case 7:return a.abrupt("break",8);case 8:t.showPicker=!1;case 9:case"end":return a.stop()}}),a)})))()},handleDateChange:function(e){this.form[this.pickType]=Object(n["a"])(e,"yyyy-MM-dd"),this.showCalendar=!1,this.getApproveSteps()},pickerUserDone:function(e){this.pickerUsers[this.pickerUserType]=e},pickerAddressDone:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.form[t.areaType]="".concat(e.area," ").concat(e.detail),t.pickerAddress[t.areaType]=e,!t.form.from_address||!t.form.to_address){a.next=9;break}return r=t.pickerAddress.from_address.location,s=t.pickerAddress.to_address.location,a.next=7,d["a"].getDistance(r,s);case 7:t.form.travel_mileage=a.sent,0===t.form.travel_mileage&&(t.form.to_address="",t.pickerAddress.to_address={},t.$notify({type:"danger",message:"出发地和目的地不能相同",duration:1e3}));case 9:case"end":return a.stop()}}),a)})))()},handleDelUser:function(e,t){this.pickerUsers[t].splice(e,1)},getTypeData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["e"].getList();case 3:a=t.sent,r=a.data,e.typeData=r,e.pickData.type=r.map((function(e){return e.name})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},getApproveSteps:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p["a"].approveStep({department_id:e.form.department_id,date:e.form.start_time});case 3:a=t.sent,r=a.data,e.stepList=r,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](0),console.log(t.t0);case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))()},onSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,s,i,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(0!==e.form.travel_mileage){t.next=3;break}return e.$notify({type:"danger ",message:"出发地和目的地不能相同",duration:1e3}),t.abrupt("return",!1);case 3:return e.button.loading=!0,a=e.$toast.loading({duration:0,forbidClick:!0,message:"数据提交中，请稍后..."}),t.prev=5,r=Object.assign({},e.form),r.from_address=JSON.stringify(e.pickerAddress.from_address),r.to_address=JSON.stringify(e.pickerAddress.to_address),t.next=11,p["a"].approveAdd(r);case 11:s=t.sent,i=s.code,n=s.msg,a.clear(),e.button.loading=!1,200===i?(e.submit=!0,e.$notify({type:"success",message:n,duration:1e3}),e.$router.push("/use")):e.$notify({type:"danger",message:n,duration:1e3}),t.next=23;break;case 19:t.prev=19,t.t0=t["catch"](5),console.log(t.t0),e.button.loading=!1;case 23:case"end":return t.stop()}}),t,null,[[5,19]])})))()}},beforeRouteLeave:function(e,t,a){this.submit?a():this.$dialog.confirm({title:"提示",message:"退出后内容将不会保存，您是否要继续?",confirmButtonColor:"#467db9",confirmButtonText:"继续填写"}).then((function(){a(!1)})).catch((function(){a()}))}},u=l,m=(a("4d61"),a("2877")),v=Object(m["a"])(u,r,s,!1,null,"50cd3d33",null);t["default"]=v.exports},"9e5b":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("van-skeleton",{attrs:{title:"",avatar:"",row:3,loading:e.loading}},[a("div",{staticClass:"info-box"},[a("div",{staticClass:"info"},[a("div",{staticClass:"title"},[a("van-image",{attrs:{width:"56",height:"56",src:e.info.avatar,radius:"4"}}),a("span",[e._v(e._s(e.info.user_name)+"的用车申请记录")]),0==e.info.status?a("van-tag",{attrs:{plain:"",type:"primary"}},[e._v("待审批")]):1==e.info.status&&1==e.info.car_use_status?a("van-tag",{attrs:{plain:"",type:"success"}},[e._v("已通过-等待出行")]):2==e.info.status?a("van-tag",{attrs:{plain:"",type:"warning"}},[e._v("已驳回")]):3==e.info.status?a("van-tag",{attrs:{plain:""}},[e._v("已撤销")]):1==e.info.status&&2==e.info.car_use_status?a("van-tag",{attrs:{plain:"",type:"primary"}},[e._v("已出场-用车中")]):1==e.info.status&&3==e.info.car_use_status?a("van-tag",{attrs:{plain:"",type:"primary"}},[e._v("已出场-回程中")]):1==e.info.status&&4==e.info.car_use_status?a("van-tag",{attrs:{plain:"",type:"primary"}},[e._v("已回场-用车结束")]):4==e.info.status&&0==e.info.car_use_status?a("van-tag",{attrs:{plain:"",type:"warning"}},[e._v("取消用车")]):a("van-tag",{attrs:{plain:"",type:"primary"}},[e._v("已完成")])],1),a("div",{staticClass:"apply-info"},[a("p",[a("span",{staticClass:"prop-name"},[e._v("用车编号：")]),e._v(" "+e._s(e.info.approval_sn)+" ")]),a("p",[a("span",{staticClass:"prop-name"},[e._v("申请时间：")]),e._v(" "+e._s(e._f("timeFormat")(e.info.createtime,"yyyy-mm-dd"))+" ")]),a("p",[a("span",{staticClass:"prop-name"},[e._v("用车人电话：")]),e._v(" "+e._s(e.info.mobile)+" ")]),a("p",[a("span",{staticClass:"prop-name"},[e._v("所在部门：")]),e._v(" "+e._s(e.info.department_name)+" ")]),a("p",[a("span",{staticClass:"prop-name"},[e._v("车辆类型：")]),e._v(" "+e._s(e.info.type_name)+" ")]),a("p",[a("span",{staticClass:"prop-name"},[e._v("开始时间：")]),e._v(" "+e._s(e._f("timeFormat")(e.info.start_time,"yyyy-mm-dd"))+" ")]),a("p",[a("span",{staticClass:"prop-name"},[e._v("乘车人数：")]),e._v(" "+e._s(e.info.all_userid)+" ")]),a("p",[a("span",{staticClass:"prop-name"},[e._v("出发地：")]),e._v(" "+e._s(e.info.from_address)+" ")]),a("p",[a("span",{staticClass:"prop-name"},[e._v("目的地：")]),e._v(" "+e._s(e.info.to_address)+" ")]),a("p",[a("span",{staticClass:"prop-name"},[e._v("司机配备：")]),e._v(" "+e._s(1==e.info.have_driver?"需要":"不需要")+" ")]),a("p",[a("span",{staticClass:"prop-name"},[e._v("用车事由：")]),e._v(" "+e._s(e.info.cause)+" ")]),a("p",[e.info.log_cause?a("span",{staticClass:"prop-name"},[e._v("备注：")]):e._e(),a("span",{staticStyle:{color:"red"}},[e._v(e._s(e.info.log_cause))])])])]),a("div",{staticClass:"approve-box"},[a("div",{staticClass:"title"},[e._v("审批流程")]),a("van-steps",{attrs:{direction:"vertical",active:e.active,"active-color":"#0082ef"}},e._l(e.info.progress,(function(t,r){return a("van-step",{key:r,scopedSlots:e._u([e.active==r&&1==t.is_approval?{key:"active-icon",fn:function(){return[a("van-icon",{staticClass:"success",attrs:{name:"checked"}})]},proxy:!0}:2==t.is_approval?{key:"active-icon",fn:function(){return[a("van-icon",{staticClass:"close",attrs:{name:"clear"}})]},proxy:!0}:{key:"active-icon",fn:function(){return[a("i",{staticClass:"aprove"})]},proxy:!0}],null,!0)},[a("div",{staticClass:"item"},[a("div",{staticClass:"photo"},[a("van-icon",{attrs:{name:"friends"}})],1),a("div",{staticClass:"title"},[a("span",[a("span",{staticClass:"role-name"},[e._v(e._s(t.approve_name))]),1==t.is_approval?a("span",[e._v("·已同意")]):2==t.is_approval?a("span",[e._v("·已驳回")]):a("span",[e._v("·审核中")])]),a("span",[e._v("("+e._s(t.is_approval_number)+"/"+e._s(t.approval_number)+")")]),a("van-tag",{attrs:{type:"primary",plain:"",color:"#467DB9"}},[e._v(e._s(1===t.type?"会签":"或签"))]),t.user_list.length>0?a("van-icon",{attrs:{name:t.show?"arrow-up":"arrow-down"},on:{click:function(t){return e.handleUserShow(r)}}}):e._e(),t.is_approval_time>0?a("div",{staticClass:"time"},[a("span",[e._v(e._s(e._f("timeFormat")(t.is_approval_time,"mm-dd hh:mm")))])]):e._e()],1)]),a("ul",{directives:[{name:"show",rawName:"v-show",value:t.show,expression:"item.show"}],staticClass:"user-list"},e._l(t.user_list,(function(t){return a("li",{key:t.id},[a("div",{staticClass:"left"},[a("div",{staticClass:"photo"},[a("img",{attrs:{src:t.avatar}})]),e._v(" "+e._s(t.role_name?"("+t.role_name+")":"")+" "),a("span",[e._v(e._s(t.name)+e._s(1==t.is_approval?"·已同意":2==t.is_approval?"·已驳回":""))])]),t.is_approval_time>0?a("div",{staticClass:"time"},[e._v(e._s(e._f("timeFormat")(t.is_approval_time,"mm-dd hh:mm")))]):e._e()])})),0)])})),1)],1),a("div",{staticClass:"copyer"},[e._v("抄送人："+e._s(1==e.info.have_driver?"司机、":"")+e._s(e.info.copyer_name))]),0==e.info.status?a("div",{staticClass:"foot"},[a("div",{on:{click:function(t){return e.handleClick("reminder")}}},[e._v("催办")]),a("div",{on:{click:function(t){return e.handleClick("revoke")}}},[e._v("撤销")]),a("div",{on:{click:function(t){return e.handleClick("anew")}}},[e._v("重新申请")])]):e._e()])])},s=[],i=(a("99af"),a("4de4"),a("4160"),a("a15b"),a("d81d"),a("b0c0"),a("159b"),a("96cf"),a("1da1")),n=a("365c"),o=a("61f7"),c={data:function(){return{loading:!0,id:"",active:-1,approveStatus:"1",info:{approval_sn:"",have_driver:"",mobile:"",from_address:"",to_address:"",all_userid:1,department:"",avatar:"",user_name:"",start_time:"",end_time:"",cause:"",createtime:"",status:"",car_use_status:"",type_name:"",department_name:"",all_user:[]}}},created:function(){this.id=this.$route.params.id,this.approveStatus=this.$route.params.status,this.getData()},methods:{getData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var a,r,s,i,c,p;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,n["a"].getInfo({id:e.id,type:1});case 2:a=t.sent,r=a.msg,s=a.code,i=a.data,200===s?(e.loading=!1,c="",p="",e.info=Object.assign({},i),Object(o["a"])(e.info.from_address)&&(c=JSON.parse(e.info.from_address),p=JSON.parse(e.info.to_address),e.info.from_address="".concat(c.area," ").concat(c.detail),e.info.to_address="".concat(p.area," ").concat(p.detail)),e.info.progress=e.converProgress(e.info.progress),e.info.copyer_name=Array.isArray(e.info.copyer_user)?e.info.copyer_user.map((function(e){return e.name})).join("、"):""):(e.$notify({type:"danger",message:r,duration:1e3}),e.$router.push("/use"));case 7:case"end":return t.stop()}}),t)})))()},converProgress:function(e){var t=this;return e.forEach((function(e){var a=[];1===e.approver_type?(e.user_list=e.leader_arr,e.approve_name="上级主管"):(e.user_list=e.role_user_arr,e.approve_name=e.approval_role.map((function(e){return e.role_name})).join("/")),a=e.user_list.filter((function(e){return e.is_approval>0})),e.show=!1,e.approval_number=e.user_list.length,e.is_approval_number=a.length,e.is_approval_time=e.is_approval_number>0?a[0].is_approval_time:0,1==e.is_deal_approval&&(e.is_approval=e.last_approval_status,t.active++)})),e},handleClick:function(e){var t=this,a={reminder:"是否催办该条审批，确定继续？",revoke:"是否撤销该条审批，确定继续？",anew:"重新提交后，当前用车审批将自动撤销，确定继续？"};this.$dialog.confirm({title:"提示",message:a[e],beforeClose:function(a,r){return t.beforeClose(a,r,e)}}).catch((function(){}))},handleUserShow:function(e){this.info.progress[e].show=!this.info.progress[e].show,this.$forceUpdate()},beforeClose:function(e,t,a){"confirm"===e?this.approveAction(a,t):t()},approveAction:function(e,t){var a=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var s,i,o,c,p,d;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if("revoke"!==e&&"anew"!==e){r.next=9;break}return r.next=3,n["a"].approveRevoke({id:a.id});case 3:s=r.sent,i=s.code,o=s.msg,200===i?("anew"===e?a.$router.push("/use/edit/".concat(a.id)):(a.$notify({type:"success",message:o,duration:1e3}),a.getData(),a.$router.push("/use")),t()):(a.$notify({type:"danger",message:o,duration:1e3}),t(!1)),r.next=15;break;case 9:return r.next=11,n["a"].approveReminder({id:a.id});case 11:c=r.sent,p=c.code,d=c.msg,200===p?(a.$notify({type:"success",message:d,duration:1e3}),a.getData(),a.$router.push("/use"),t()):(a.$notify({type:"danger",message:d,duration:1e3}),t(!1));case 15:case"end":return r.stop()}}),r)})))()}}},p=c,d=(a("5a38"),a("2877")),l=Object(d["a"])(p,r,s,!1,null,"618c8cee",null);t["default"]=l.exports},d5b0:function(e,t,a){}}]);