(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["car"],{2834:function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("van-form",{staticClass:"add-car",attrs:{"scroll-to-error":""},on:{submit:e.onSubmit}},[r("van-field",{attrs:{required:"",name:"car_number",label:"车牌号",placeholder:"请输入车牌号","input-align":"right",rules:[{pattern:e.pattern,message:"请输入正确的车牌号如：京AA0001",trigger:"onChange"}]},model:{value:e.form.car_number,callback:function(t){e.$set(e.form,"car_number",t)},expression:"form.car_number"}}),r("van-field",{attrs:{required:"",name:"type_id",label:"车辆类型",placeholder:"请选择车辆类型",readonly:"","input-align":"right","right-icon":"arrow",rules:[{required:!0,message:"请选择车辆类型",trigger:"onChange"}]},on:{click:function(t){e.showPicker=!0,e.pickType="type"}},model:{value:e.pickCheckName.type,callback:function(t){e.$set(e.pickCheckName,"type",t)},expression:"pickCheckName.type"}}),r("van-field",{attrs:{required:"",type:"digit",name:"seats_number",label:"座位数",placeholder:"座位数","input-align":"right",rules:[{required:!0,message:"请输入车辆的座位数"}]},model:{value:e.form.seats_number,callback:function(t){e.$set(e.form,"seats_number",t)},expression:"form.seats_number"}}),r("van-field",{attrs:{required:"",name:"drive_km",type:"number",label:"里程表",placeholder:"里程表","input-align":"right",rules:[{required:!0,message:"请输入车俩的里程表初始记录",trigger:"onChange"}]},scopedSlots:e._u([{key:"input",fn:function(){return[r("input",{directives:[{name:"model",rawName:"v-model",value:e.form.drive_km,expression:"form.drive_km"}],staticClass:"input-number",attrs:{type:"number",placeholder:"里程表"},domProps:{value:e.form.drive_km},on:{input:[function(t){t.target.composing||e.$set(e.form,"drive_km",t.target.value)},function(t){e.form.drive_km=e.inputFloat(e.form.drive_km)}]}})]},proxy:!0}]),model:{value:e.form.drive_km,callback:function(t){e.$set(e.form,"drive_km",t)},expression:"form.drive_km"}}),r("van-field",{attrs:{name:"prompt",rows:"2",autosize:"",label:"备注",type:"textarea",maxlength:"50",placeholder:"请填写车辆的备注信息","show-word-limit":""},model:{value:e.form.prompt,callback:function(t){e.$set(e.form,"prompt",t)},expression:"form.prompt"}}),r("div",{staticClass:"submit-btn"},[r("van-button",{attrs:{type:"info",size:"large",color:"#467db9",block:"","native-type":"submit",loading:e.button.loading,"loading-txt":e.button.loadingTxt}},[e._v(" 提交 ")])],1),r("van-popup",{attrs:{position:"bottom"},model:{value:e.showPicker,callback:function(t){e.showPicker=t},expression:"showPicker"}},[r("van-picker",{attrs:{"show-toolbar":"",columns:e.pickData[e.pickType]},on:{confirm:e.onConfirm,cancel:function(t){e.showPicker=!1}}})],1)],1)},a=[],i=(r("99af"),r("4de4"),r("c975"),r("d81d"),r("fb6a"),r("b0c0"),r("ac1f"),r("5319"),r("1276"),r("96cf"),r("1da1")),o=r("365c"),c={data:function(){return{form:{car_number:"",type_id:"",seats_number:"",drive_km:"",prompt:""},pickType:"",showPicker:!1,pickData:{type:[]},pickCheckName:{type:""},typeData:[],pattern:/^(([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领][A-Z](([0-9]{5}[DF])|([DF]([A-HJ-NP-Z0-9])[0-9]{4})))|([京津沪渝冀豫云辽黑湘皖鲁新苏浙赣鄂桂甘晋蒙陕吉闽贵粤青藏川宁琼使领][A-Z][A-HJ-NP-Z0-9]{4}[A-HJ-NP-Z0-9挂学警港澳使领]))$/,submit:!1,button:{loading:!1,loadingTxt:"提交中"}}},created:function(){this.getTypeData()},methods:{inputFloat:function(e){var t=e,r=t.substr(0,1),n=t.substr(1,1);if(t.length>1&&0==r&&"."!=n&&(t=t.substr(1,1)),"."==r&&(t=""),-1!=t.indexOf(".")){var a=t.substr(t.indexOf(".")+1);-1!=a.indexOf(".")&&(t=t.substr(0,t.indexOf(".")+a.indexOf(".")+1))}return t=t.replace(/[^\d^\.]+/g,""),-1!=t.indexOf(".")&&(t=t.split("."),t="".concat(t[0],".").concat(t[1].slice(0,2))),t},onConfirm:function(e){switch(this.pickType){case"area":var t=e.map((function(e){return e.name}));this.form.area=t[t.length-1];break;case"type":this.pickCheckName.type=e,this.form.type_id=this.typeData.filter((function(t){return t.name===e}))[0].id;break;default:break}this.showPicker=!1},getTypeData:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,o["e"].getList();case 3:r=t.sent,n=r.data,e.typeData=n,e.pickData.type=n.map((function(e){return e.name})),t.next=12;break;case 9:t.prev=9,t.t0=t["catch"](0),console.log(t.t0);case 12:case"end":return t.stop()}}),t,null,[[0,9]])})))()},handleImgChange:function(e,t,r){this.form[t][r]=e.data.files},onSubmit:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var r,n,a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.button.loading=!0,t.prev=1,r=Object.assign({},e.form),t.next=5,o["b"].carAdd(r);case 5:n=t.sent,a=n.code,i=n.msg,200===a?(e.button.loading=!1,e.submit=!0,e.$notify({type:"success",message:"添加成功",duration:1e3}),e.$router.push("/car")):(e.$notify({type:"danger",message:i,duration:1e3}),e.button.loading=!1),t.next=15;break;case 11:t.prev=11,t.t0=t["catch"](1),console.log(t.t0),e.button.loading=!1;case 15:case"end":return t.stop()}}),t,null,[[1,11]])})))()}},beforeRouteLeave:function(e,t,r){this.submit?r():this.$dialog.confirm({title:"提示",message:"退出后内容将不会保存，您是否要继续?",confirmButtonColor:"#467db9",confirmButtonText:"继续填写"}).then((function(){r(!1)})).catch((function(){r()}))}},s=c,u=(r("f17f"),r("2877")),l=Object(u["a"])(s,n,a,!1,null,"ad07ce68",null);t["default"]=l.exports},f17f:function(e,t,r){"use strict";var n=r("fcd2"),a=r.n(n);a.a},fb6a:function(e,t,r){"use strict";var n=r("23e7"),a=r("861d"),i=r("e8b5"),o=r("23cb"),c=r("50c4"),s=r("fc6a"),u=r("8418"),l=r("b622"),m=r("1dde"),p=r("ae40"),d=m("slice"),f=p("slice",{ACCESSORS:!0,0:0,1:2}),b=l("species"),g=[].slice,h=Math.max;n({target:"Array",proto:!0,forced:!d||!f},{slice:function(e,t){var r,n,l,m=s(this),p=c(m.length),d=o(e,p),f=o(void 0===t?p:t,p);if(i(m)&&(r=m.constructor,"function"!=typeof r||r!==Array&&!i(r.prototype)?a(r)&&(r=r[b],null===r&&(r=void 0)):r=void 0,r===Array||void 0===r))return g.call(m,d,f);for(n=new(void 0===r?Array:r)(h(f-d,0)),l=0;d<f;d++,l++)d in m&&u(n,l,m[d]);return n.length=l,n}})},fcd2:function(e,t,r){}}]);